<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../img/logo.png" type="image/png" sizes="16x16" />
    <link rel="stylesheet" href="../estilos/global.css">
    <link rel="stylesheet" href="../estilos/product-page.css">
    <link rel="stylesheet" href="../estilos/spikes.css">
    <title>Product Page üì¶</title>
</head>
<style>
    html, body {
        height: 100%;
        margin: 0;
        display: flex;
        flex-direction: column;
    }
    body {
        display: flex;
        flex-direction: column;
        }
    main{
        flex:1;
    }
    .foto-anuncio {
        width: 500px;
        height: 500px;
        object-fit: cover;
        border-radius: 12px;
        box-shadow:  0 4px 6px rgba(0, 0, 0, 0.1);
    }
</style>
<body>
<main>
    <div class="header">
        <div class="logo">
            <a href="../paginas/main-page.html">
                <img src="../img/logo.png" alt="Logo">
            </a>
        </div>
        <div class="menu">
            <a href="main-page.html">Home</a>
            <a href="about-us-page.html">Sobre</a>
            <a href="contact-page.html">Contato</a>
        </div>
        <div class="login_register">
          <a href="../paginas/login-page.html">Login</a>
          <a href="../paginas/register-page.html">Registrar</a>
        </div>
    </div>

    <div class="anuncio">  
        <div class="info">
            <div class="fotos">
                <img src="https://placehold.co/500x500/png" alt="imagem do produto" class="foto-anuncio">
            </div>

            <div class="descricao">
                <h1>Produto 1</h1>
                <br>
                <p>Produto comprado em 2021 com fortes marcas de uso...</p>
                <small class="pequeno">Ver descri√ß√£o completa</small>
            </div>

            <hr>

            <h2>Detalhes</h2>
            <div class="detalhes">
                <table class="tabela-detalhes">
                    <tr>
                        <th>Categoria</th>
                        <th>Tipo</th>
                        <th>Condi√ß√£o</th>
                    </tr>
                    <tr>
                        <td>Instrumentos</td>
                        <td>Microfone</td>
                        <td>Usado</td>
                    </tr>
                </table>
                
            </div>

            <hr>
            
            <div class="info-pessoa">
                <img src="../img/user-solid.svg" class="icone">
                <h3 class="local">Fulano Sicrano</h3>
                <br>
                <small>√öltimo acesso h√° 3 dias</small>
                <br>
                <br>
                <img src="../img/phone-solid.svg" class="icone">
                <p id="telefoneComprador" class="local">+55 (84) 9999-9999</p>
                <br>
                <img src="../img/map-solid.svg" class="icone">
                <p id="endere√ßoComprador" class="local">Parnamirim, Ema√∫s</p>
                <br>
                <img src="../img/location-dot-solid.svg" class="icone">
                <p id="cepComprador" class="local">CEP - 591480601</p>
            </div>
            <hr>
        </div>

        <div class="card-preco">
            <h1>R$ 720</h1>
            <p id="parcelamento">3x sem juros de R$ 240,00</p>
            <small class="pequeno">mais op√ß√µes de parcelamento</small>
            <hr>
            <p>Calcular o frete</p>
            <input type="text" class="frete" placeholder="Digite o CEP">
            <small class="pequeno">N√£o sei meu CEP</small>
            <hr>

            <button class="botao-card laranja"><img src="../img/cart-shopping-solid.svg" class="botao-img">Comprar</button>
            <button class="botao-card branco"><img src="../img/comments-solid.svg"  class="botao-img">Chat</button>
        </div>

    </div>
</main>
<!-- Rodap√© -->
<div class="spikebox" style="z-index: 0;margin-top: 100px;">
    <div class="spikes over" style="background-image: url(../img/spikeoverpattern.png);"></div>
    <div style="color: white;background-color: #205781;height: 100px ; width: 100%; display: flex; justify-content: center; align-items: center; flex-direction: column; text-align: center; padding: 40px 0;">
      <p style="margin: 5px 0;font-weight: bold;">&copy; 2025 Usados+ - Todos os direitos reservados.</p>
      <p style="margin: 5px 0;font-weight: bold;">Compra e venda de produtos usados com seguran√ßa e praticidade.</p>
      <nav style="margin-top: 20px;margin-bottom: 20px;font-weight: bold;">
        <a href="about-us-page.html" style="color: #d68500; margin: 0 10px; text-decoration: none;">Sobre</a>
        <a href="contact-page.html" style="color: #d68500; margin: 0 10px; text-decoration: none;">Contato</a>
        <a href="notFound-page.html" style="color: #d68500; margin: 0 10px; text-decoration: none;">Termos de uso</a>
        <a href="notFound-page.html" style="color: #d68500; margin: 0 10px; text-decoration: none;">Pol√≠tica de privacidade</a>
      </nav>
    </div>
</div>
</body>
<script>
  window.addEventListener("DOMContentLoaded", () => {
    const productString = localStorage.getItem("selectedProduct");
    const product = productString ? JSON.parse(productString) : null;

    // Seletores para os elementos da p√°gina
    const comprarButton = document.querySelector(".botao-card.laranja");
    const nomeProdutoEl = document.querySelector(".descricao h1");
    const descricaoProdutoEl = document.querySelector(".descricao p");
    const fotoAnuncioEl = document.querySelector(".foto-anuncio");
    const precoEl = document.querySelector(".card-preco h1");
    const tabelaDetalhesEl = document.querySelector(".tabela-detalhes");
    const parcelamentoEl = document.querySelector("#parcelamento");
    const nomeVendedorEl = document.querySelector(".info-pessoa h3.local");
    const telefoneCompradorEl = document.querySelector("#telefoneComprador");
    const enderecoCompradorEl = document.querySelector("#endere√ßoComprador");
    const cepCompradorEl = document.querySelector("#cepComprador");

    if (!product) {
        if (nomeProdutoEl) nomeProdutoEl.textContent = "Produto Indispon√≠vel";
        if (descricaoProdutoEl) descricaoProdutoEl.textContent = "Por favor, selecione um produto na loja ou volte para a p√°gina principal.";
        if (fotoAnuncioEl) fotoAnuncioEl.src = 'https://placehold.co/500x500/png?text=Produto+N%C3%A3o+Encontrado';
        if (comprarButton) comprarButton.disabled = true;
        return;
    }

    // Preenche os dados do produto na p√°gina
    if (fotoAnuncioEl) fotoAnuncioEl.src = product.image || 'https://placehold.co/500x500/png?text=Imagem+Indispon%C3%ADvel';
    if (nomeProdutoEl) nomeProdutoEl.textContent = product.name || "Nome Indispon√≠vel";
    if (descricaoProdutoEl) descricaoProdutoEl.textContent = product.description || "Descri√ß√£o n√£o fornecida.";
    if (precoEl) precoEl.textContent = `R$ ${parseFloat(product.price).toFixed(2)}`;
    
    if (tabelaDetalhesEl) {
        tabelaDetalhesEl.innerHTML = `
        <tr>
            <th>Categoria</th>
            <th>Tipo</th>
            <th>Condi√ß√£o</th>
        </tr>
        <tr>
            <td>${product.category || 'N/A'}</td>
            <td>${product.type || 'N/A'}</td>
            <td>${product.condition || 'N/A'}</td>
        </tr>
        `;
    }

    if (parcelamentoEl && product.price) {
        const quantidadeParcelas = 3;
        const valorParcelado = (parseFloat(product.price) / quantidadeParcelas).toFixed(2);
        parcelamentoEl.textContent = `${quantidadeParcelas}x s/ juros de R$ ${valorParcelado}`;
    }

    if (nomeVendedorEl) nomeVendedorEl.textContent = product.creator || "Vendedor An√¥nimo";
    if (telefoneCompradorEl) telefoneCompradorEl.textContent = product.phone || "N√£o informado";
    if (enderecoCompradorEl) enderecoCompradorEl.textContent = product.address || "N√£o informado";
    if (cepCompradorEl) cepCompradorEl.textContent = product.cep || "N√£o informado";

    if (comprarButton) {
        comprarButton.disabled = false; 
    }

    if (comprarButton) {
        comprarButton.addEventListener("click", function() {
            if (!product || !product.name) {
                alert("Erro: N√£o foi poss√≠vel identificar o produto. Tente novamente.");
                return;
            }

            let cartItems = JSON.parse(localStorage.getItem("cartItems")) || [];
            
            const productToAdd = { 
                ...product, 
                desiredQuantity: 1
            };

            cartItems.push(productToAdd);
            
            localStorage.setItem("cartItems", JSON.stringify(cartItems));
            alert(`"${product.name}" foi adicionado ao carrinho!`);
            window.location.href = 'cart-page.html';
        });
    }
  });
</script>

<script src="../js/global.js"></script>